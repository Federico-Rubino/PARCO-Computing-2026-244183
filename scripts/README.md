# SCRIPTS FOLDER
This folder contains usefull scripts

## PBS script
To run a simulation on a PBS managed cluster, the given script can be used. 
The script automates the compilation and execution of SpMV experiments on a cluster using PBS job scheduling.
All paths inside the script must be updated to match the correct locations on your system once the project is downloaded.

### What the script does
- submit a PBS job that sets job name, output and error files, selects the target queue, defines runtime and required hardware resources
- loads the required compiler module
- compiles the C source code with OpenMP flag and O3 optimization level
- reads the ` .mtx ` file and extracts the number of row, columns and non-zero entries (nnz)
- initializes the log results file (CSV)
Runs:
- - A serial SpMV execution with one thread
- - Multiple parallel execution using OpenMP static scheduling and custom nnz-balanced scheduling. For each of these the script tests several thread counts

### Running the job
Once the script is modified with correct path and correct hardware resources, submit with ` qsub spmv.pbs `

## Python scripts

---
### Single mtx plot 
`prformancePlot.py` generates performance plots for a single matrix reading the corresponing CSV file produced by the PBS experiments.

#### Input
- a csv file containing SpMV results generated by `spmv.pbs`
- an output directory where the plots will be saved
```
--csv <input_csv_file>
--outdir <output_directory>
```
#### Output
The script extract the matrix name and nnz, compute performance in GFLOP/s and produces a bar chart and a line chart

---
### Global mtx plot
`globalPlot.py` generates a global comparison plot across multiple matrices by reading all the CSV files inside a given folder.

#### Input
- a folder containing multiple CSV files, each generated by `spmv.pbs`
- an output directory where the final combined plot will be saved
- (Optional) A thread count to extract GFLOP/s values for parallel executions (default: 64).

```
--input <folder_with_csv_files>
--output <output_folder>
--threads <thread_count>
```

#### Output
The script computes the GFLOP/s performance for each scheduling mode across all matrices and produces a bar chart across matrices